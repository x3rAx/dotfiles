#!/usr/bin/env bash

run() {
    if command appimage-run >/dev/null 2>&1; then
        appimage-run "$@"
    else
        "$@"
    fi
}

clean_exit=false
while [[ $clean_exit == false ]]; do
    #nice -n 19 ionice -n 7 appimage-run ~/.local/opt/kopia/KopiaUI-0.9.5.AppImage \
    run ~/.local/opt/kopia/KopiaUI.AppImage \
        && clean_exit=true

    if [[ $clean_exit == false ]]; then
        notify-send "Kopia-UI Crashed" "Kopia-UI has exited with a non-zero exit code and will be restarted."
        sleep 1
    fi
done

